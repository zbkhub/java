
<!DOCTYPE html>  
<html>  
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title>Hello, World</title>  

<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=hypWiVzxCy1nEdvcGoFup3gYsx13b1vE">
//v2.0版本的引用方式：src="http://api.map.baidu.com/api?v=2.0&ak=您的密钥"
//v1.4版本及以前版本的引用方式：src="http://api.map.baidu.com/api?v=1.4&key=您的密钥&callback=initialize"
</script>
<style type="text/css">  
	html{height:100%}  
	body{height:100%;margin:0px;padding:0px}  
	#con{height:600px;width:900px}  
</style> 
<script type="text/javascript"> 
function ma(da){
alert(da);
	var map = new BMap.Map("con");          // 创建地图实例  
	var point = new BMap.Point(da.point.lng,da.point.lat);  // 创建点坐标  
	map.centerAndZoom(point, 15);     
	/* var marker = new BMap.Marker(point);        // 创建标注    
	map.addOverlay(marker)	// 初始化地图，设置中心点坐标和地图级别  */
	
	
	//创建小狐狸
	var pt = new BMap.Point(113.682701,34.778257);
	var myIcon = new BMap.Icon("http://developer.baidu.com/map/jsdemo/img/fox.gif", new BMap.Size(300,157));
	var marker2 = new BMap.Marker(pt,{icon:myIcon});  // 创建标注
	map.addOverlay(marker2);              // 将标注添加到地图中
	marker2.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
	/* 周边搜索 
	var local = new BMap.LocalSearch(map,   
	              { renderOptions:{map: map, autoViewport: true}});      
	local.searchNearby("小吃", "纬五路"); */


	var traffic = new BMap.TrafficLayer();        // 创建交通流量图层实例      
	map.addTileLayer(traffic);  
	//map.removeTileLayer(traffic);                // 将图层移除
	
	//可拖动标注
	marker2.enableDragging();    
	marker2.addEventListener("dragend", function(e){    
 alert("当前位置：" + e.point.lng + ", " + e.point.lat);    
})

	/* var map = new BMap.Map("l-map");          // 创建地图实例     
	var point = new BMap.Point(116.404, 39.915);  // 创建点坐标     
	map.centerAndZoom(point,15);                  // 初始化地图，设置中心点坐标和地图级别     
	var tilelayer = new BMap.TileLayer();         // 创建地图层实例    
	tilelayer.getTilesUrl=function(){             // 设置图块路径     
          return "layer.gif";      
	};      
	map.addTileLayer(tilelayer);                // 将图层添加到地图上 */

var myDrag = new BMapLib.DragAndZoomTool(map, {    
 followText : "拖拽鼠标进行操作"    
});




	var polyline = new BMap.Polyline([    
   new BMap.Point(113.658986,34.752873),    
   new BMap.Point(113.677887, 34.778791)    
 ],    
 {strokeColor:"blue", strokeWeight:6, strokeOpacity:0.5}    
);    
map.addOverlay(polyline);

                  // 将图层添加到地图上
//	function addMarker(point, index){  // 创建图标对象   
//	var myIcon = new BMap.Icon("markers.png", new BMap.Size(23, 25), {    
// 指定定位位置。   
// 当标注显示在地图上时，其所指向的地理位置距离图标左上    
// 角各偏移10像素和25像素。您可以看到在本例中该位置即是   
   // 图标中央下端的尖角位置。    
  // offset: new BMap.Size(10, 25),    
   // 设置图片偏移。   
   // 当您需要从一幅较大的图片中截取某部分作为标注图标时，您   
   // 需要指定大图的偏移位置，此做法与css sprites技术类似。    
  // imageOffset: new BMap.Size(0, 0 - index * 25)   // 设置图片偏移    
 //});}
	}
 
 var go=new BMap.Geolocation();
 go.getCurrentPosition(ma);
 
</script>  

</head>  
 
<body>  
<div id="con" align="center"></div> 

</body>  
</html>